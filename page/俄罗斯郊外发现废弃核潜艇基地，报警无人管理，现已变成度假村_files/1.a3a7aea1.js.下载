(window.HK3=window.HK3||[]).push([[1],{b6ec:function(e,t,i){(function(e){!function(t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p(e);if(t){var o=p(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return h(this,i)}}function f(e,t,i){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,a=void 0;try{for(var c,r=e[Symbol.iterator]();!(n=(c=r.next()).done)&&(i.push(c.value),!t||i.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var v=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()};function y(e,t){return v(e)===t.toLowerCase()}function k(e){return null==e}function w(e){return void 0===e}function _(e){return!!y(e,"Object")&&(null===Object.getPrototypeOf(e)||Object===e.constructor)}function C(e){return y(e,"Function")}function E(e){return y(e,"String")}function S(e){return y(e,"Array")}function j(e){return!0===e||!1===e}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return k(e)?t:E(e)?e:String(e)}var T={name:"",version:""},L={opera:/Opera\/([\d.]+)/,firefox:/Firefox\/([\d.]+)/,ie:/MSIE\s([\d.]+)/,ie11:/Trident\/[\d](?=[^\?]+).*rv:([0-9.]+)/,edge:/Edge\/([\d.]+)/,chrome:/Chrome\/([\d.]+)/,safari:/Safari\/([\d.]+)/};function P(e){return L.opera.test(e)?"Opera":L.firefox.test(e)?"Firefox":L.ie.test(e)||L.ie11.test(e)?"IE":L.edge.test(e)?"Edge":L.chrome.test(e)?"Chrome":L.safari.test(e)?"Safari":"other"}var D=navigator.userAgent||"";T.name=P(D),T.version=function(e,t){var i="";switch(t=t||P(e)){case"Opera":case"Firefox":case"Edge":case"Chrome":case"Safari":var n=L[t.toLocaleLowerCase()].exec(e);i=n?n[1]:"";break;case"IE":var o=L.ie.exec(e)||L.ie11.exec(e);i=o?o[1]:""}return i}(D,T.name);var R={isDev:!0,isLogin:!1,userInfo:{},appid:"",threadId:"",commentCount:0,winHeight:window.innerHeight||document.documentElement.clientHeight,passStaticPage:"",isHigherBrowser:function(e){var t=T.name.toLocaleLowerCase();if(e.hasOwnProperty(t)){var i=e[t];return function(e,t){e=I(e,""),t=I(t,"");for(var i=e.split("."),n=t.split("."),o=0,a=Math.max(i.length,n.length);o<a;o++){if(i[o]&&!n[o]&&parseInt(i[o],10)>0||parseInt(i[o],10)>parseInt(n[o],10))return 1;if(n[o]&&!i[o]&&parseInt(n[o],10)>0||parseInt(i[o],10)<parseInt(n[o],10))return-1}return 0}(T.version,i)>-1}return!0}({ie:"11"})},O={thread_id:"",reply_id:"",start:0,num:20,appid:"",order:"12",inner_order:"9",use_list:"1",callback:"?"},A="https://ext.baidu.com",z={LIST1:"".concat(A,"/api/comment/v2/comment/list"),LIST2:"".concat(A,"/api/comment/v2/comment/detail"),UPDOWN:"".concat(A,"/api/comment/v1/comment/updown"),DELETE:"".concat(A,"/api/comment/v1/comment/delreply"),REPORT:"".concat(A,"/api/comment/v1/comment/report"),ADDREPLY:"".concat(A,"/api/comment/v1/comment/addreply")},N="正在加载...",B="加载失败，点击重新加载",K="查看更多评论",M="没有更多啦",H="网络不给力，请稍后重试",U=[{id:"4",text:"反动违法"},{id:"1",text:"色情低俗"},{id:"6",text:"谩骂攻击"},{id:"3",text:"营销广告"},{id:"9",text:"其他"}],q=function(e){return"".concat("https://author.baidu.com/home","?context=%7B%22uk%22%3A%22").concat(e,"%22%7D")},F={202:"参数错误，发送失败",701:"手速太快了，休息一下再试吧",872:"此评论暂无法回复",802:"发送失败，此内容暂不支持评论",880:"发表失败",890:"每天可发表5次图片评论",838:"由于对方设置，你无法进行该操作"},V=function(e,t,n){return new TypeError("Expected `"+e+"` to be of type `"+t+"`, got `"+i(n)+"`")},$=function(){function e(){n(this,e),this._events={}}return a(e,[{key:"on",value:function(e,t,i){if(!E(e))throw V("name","string",e);if(!C(t))throw V("callback","function",t);var n=this._events;return(n[e]||(n[e]=[])).push({fn:t,ctx:i}),this}},{key:"once",value:function(e,t,i){var n=this;function o(){n.off(e,o);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];t.apply(i,c)}return o._=t,this.on(e,o,i)}},{key:"emit",value:function(e){if(!E(e))throw V("name","string",e);for(var t=(this._events[e]||[]).slice(),i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(var a=0,c=t.length;a<c;a++){var r=t[a],s=r.fn,l=r.ctx,d=void 0===l?null:l;s.apply(d,n)}return this}},{key:"off",value:function(e,t){var i=this._events,n=i[e];if(n&&n.length)if(w(t))delete i[e];else if(C(t)){for(var o=[],a=0,c=n.length;a<c;a++){var r=n[a].fn;r!==t&&r._!==t&&o.push(n[a])}o.length?i[e]=o:delete i[e]}return this}}]),e}(),W=function(){return new $},Y=0,G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Y++,(Date.now().toString(16)+Y).slice(-1*e)},J="object"===("undefined"==typeof window?"undefined":i(window))?window:e,X=function(e){if("function"==typeof e){var t="_xfunc_".concat(G());return J[t]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(J,i)},t}return e},Z=encodeURIComponent,Q=function(e){return Z(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(E(e))return e;var i=[];for(var n in e){var o=e[n];S(o)?o=JSON.stringify(te(o)):k(o)?o="":_(o)?o=JSON.stringify(o):C(o)&&(o=X(o)),i.push("".concat(n,"=").concat(t?Q(o):o))}return i.join("&")}function te(e){return e.map((function(e){switch(v(e)){case"string":return e;case"function":return X(e);default:return e}}))}var ie=function(){};function ne(e,t,i){var n,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=document,r=e.replace(/^(css|img)!/,""),s=!1,l=i.async,d=void 0===l||l,p=i.maxTries,h=void 0===p?1:p,u=i.timeout,f=void 0===u?2e4:u,m=i.before,g=void 0===m?null:m,x=g;"function"!=typeof x&&(x=ie),/(^css!|\.css$)/.test(e)?(s=!0,(n=c.createElement("link")).rel="stylesheet",n.href=r):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(n=c.createElement("img")).src=r:((n=c.createElement("script")).src=e,n.async=!!d);var b=function(c){var r;if(clearTimeout(o),r=c instanceof Error?"e":c.type[0],s&&"hideFocus"in n)try{n.sheet.cssText.length||(r="e")}catch(e){r="e"}if("e"===r&&(a+=1)<h)return ne(e,t,i,a);n.onload=n.onerror=n.onbeforeload=null,n=null,t("e"===r?c||"error":null,e)};if(n.onload=n.onerror=b,!1!==x(e,n)){var v=c.head||c.getElementsByTagName("script")[0];v.appendChild(n),f>0&&(o=setTimeout((function(){b(new Error("timeout"))}),f))}}function oe(e){return y(e,"function")}function ae(e){var t=e.url,n=e.before,o=e.success,a=e.error,c=e.timeout,r=void 0===c?2e4:c,s=e.async,l=e.data,d=e.jsonpCallback,p=e.jsonpCallbackName;"object"===i(l)&&(l=ee(l)),l&&(t+=(-1===t.indexOf("?")?"?":"&")+l),t=t.replace(/[&?]{1,2}/,"?");var h,u=(oe(d)?d():d)||"_boxjsonp"+G(),f=window[u];window[u]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];h=t},p?t+="&"+p+"="+u:/=\?/.test(t)&&(t=t.replace(/=\?/,"="+u)),ne(t,(function(e,t){e?a(e,t):o(h&&h[0]),window[u]=f,h&&oe(f)&&f(h[0]),f=h=void 0}),{timeout:r,async:s,before:n})}var ce=function(e,t,n){if("object"===i(e)){var o,a,c=function(e){var t;return t=null==e?String(e):(t=Object.prototype.toString.call(e).toLowerCase()).substring(8,t.length-1)}(e);if(n=n||e,"array"===c||"arguments"===c||"nodelist"===c){for(o=0,a=e.length;o<a;o++)if(!1===t.call(n,e[o],o,e))return}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return}},re=/^\.([\w-]+)$/,se=/^#([\w-]*)$/,le=/^[\w-]+$/,de={mouseenter:"mouseover",mouseleave:"mouseout"},pe={},he=function(){return!0},ue=function(){return!1},fe=/^([A-Z]|layer[XY]$)/,me={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function ge(e,t,i,n){return function(e,t,i,n,o,a){var c=be(e),r=pe[c]||(pe[c]=[]);_e(t,i,(function(t,i){var a=ye(t);a.fn=i,a.sel=n,a.e in de&&(i=function(e){var t=e.relatedTarget;if(!t||t!==this&&!je(this,t))return a.fn.apply(this,arguments)}),a.del=o&&o(i);var c=a.del||i;a.proxy=function(t){var i=c.apply(e,[t].concat(t.data));return!1===i&&(t.preventDefault(),t.stopPropagation()),i},a.i=r.length,r.push(a),"addEventListener"in e&&e.addEventListener(ke(a.e),a.proxy,we(a,void 0))}))}(e,i,n,t,(function(i){return function(n){var o,a=Ce(n.target,t,e);if(a){(o=ve(n)).currentTarget=a,o.liveFired=e;for(var c=arguments.length,r=new Array(c>1?c-1:0),s=1;s<c;s++)r[s-1]=arguments[s];return i.apply(a,[o].concat(r))}}}))}function xe(e,t,i,n){return function(e,t,i,n,o){var a=be(e);_e(t||"",i,(function(t,i){(function(e,t,i,n){var o,a,c=ye(t);return c.ns&&(a=c.ns,o=new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")),(pe[be(e)]||[]).filter((function(e){return e&&(!c.e||e.e===c.e)&&(!c.ns||o.test(e.ns))&&(!i||be(e.fn)===be(i))&&(!n||e.sel===n)}))})(e,t,i,n).forEach((function(t){delete pe[a][t.i],"removeEventListener"in e&&e.removeEventListener(ke(t.e),t.proxy,we(t,void 0))}))}))}(e,i,n,t)}function be(e){return e._bid||(e._bid=G())}function ve(e){var t,i={originalEvent:e};for(t in e)fe.test(t)||void 0===e[t]||(i[t]=e[t]);return ce(me,(function(t,n){i[n]=function(){return this[t]=he,e[n].apply(e,arguments)},i[t]=ue})),i}function ye(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function ke(e){return de[e]||e}function we(e,t){return e.del&&("focus"===e.e||"blur"===e.e)||!!t}function _e(e,t,i){e.split(/\s/).forEach((function(e){i(e,t)}))}function Ce(e,t,i){for(;e&&!Se(e,t);)e=e!==i&&!Ee(e)&&e.parentNode;return e}function Ee(e){return null!=e&&e.nodeType===e.DOCUMENT_NODE}function Se(e,t){if(!e||1!==e.nodeType)return!1;var i,n=e.webkitMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var o=e.parentNode,a=!o,c=document.createElement("div");return a&&(o=c).appendChild(e),i=~function(e,t){var i;return Ee(e)&&se.test(t)?(i=e.getElementById(RegExp.$1))?[i]:[]:1!==e.nodeType&&9!==e.nodeType?[]:Array.prototype.slice.call(re.test(t)?e.getElementsByClassName(RegExp.$1):le.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))}(o,t).indexOf(e),a&&c.removeChild(e),i}function je(e,t){return e!==t&&e.contains(t)}!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.x-avatar{position:relative;display:block;width:48px;height:48px}.x-avatar.is-small{width:39px;height:39px}.x-avatar-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-avatar-img{position:relative;width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;border-radius:50%}.x-avatar-img:after{content:"";position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;width:300%;height:300%;border:3px solid rgba(0,0,0,.1);border-radius:100%;-webkit-transform:scale(.333333);transform:scale(.333333);-webkit-transform-origin:0 0;transform-origin:0 0}.x-avatar-vip{position:absolute;z-index:1;right:0;bottom:0;width:16.5px;height:16.5px;background-position:50% 50%;background-repeat:no-repeat;background-size:cover}.x-avatar .is-small-vip{width:13.2px;height:13.2px}.x-avatar .vip-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-1.png)}.x-avatar .vip-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-2.png)}.x-avatar .vip-3{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-3.png)}.x-avatar .vip-10{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-vip-10.png)}');var Ie=function(){function e(t){n(this,e),this.container=t.container,this.prefixCls="x-avatar",this.src=t.src,this.vip=t.vip,this.href=t.href,this.isSmall=t.isSmall,this.render()}return a(e,[{key:"render",value:function(){var e=document.createElement(this.href?"a":"div");e.classList.add("x-avatar",this.isSmall?"is-small":"x-avatar"),e.href=this.href;var t='\n            <div class="'.concat("x-avatar",'-placeholder"></div>\n            <div class="').concat("x-avatar",'-img" style="').concat(this.imgStyle(),'"></div>\n            ').concat(+this.vip?'<div class="'.concat("x-avatar","-vip vip-").concat(this.vip," ").concat(this.isSmall?"is-small-vip":"",'"></div>'):"","\n        ");e.innerHTML=t,this.container.appendChild(e)}},{key:"imgStyle",value:function(){return"background-image: url(".concat(this.src,")")}},{key:"updateSrc",value:function(e){this.src=e.src,this.container.querySelector(".".concat("x-avatar","-img")).style.backgroundImage="url(".concat(this.src,")")}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".user-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-family:PingFangSC-Regular}.user-bar-uname{font-family:PingFangSC-Semibold;font-size:13px;color:#222}.user-bar-lz{margin-left:4px;margin-right:-7px;padding:2px 2.67px;-webkit-transform:scale(.75);transform:scale(.75);-webkit-transform-origin:left center;transform-origin:left center;font-size:12px;line-height:1;color:#4e6ef2;border:1px solid rgba(78,110,242,.5);border-radius:3.25px;display:inline-block;font-family:initial;font-weight:400}.user-bar-dc{width:13px;height:13px;margin-left:4px;background-size:cover;background-position:50%;background-repeat:no-repeat}.user-bar-verified{padding-left:4px;font-size:13px;color:#626675;display:inline-block;max-width:200px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}");var Te=function(){function e(t){n(this,e),this.uname=t.uname,this.isAuthor=!!+t.isAuthor,this.verified=t.verified,this.decorations=t.decorations||[],this.prefixCls="user-bar"}return a(e,[{key:"makeTpl",value:function(){var e=this.decorations;return'\n            <div class="'.concat("user-bar",'">\n                <h5 class="').concat("user-bar",'-uname">').concat(this.uname).concat(this.isAuthor?'<span class="'.concat("user-bar",'-lz">作者</span>'):"","</h5>\n                ").concat(e.length?e.map((function(e){return e.icon?'<span class="'.concat("user-bar",'-dc" style="background-image:url(').concat(e.icon,')"></span>'):""})).join(""):"","\n                ").concat(this.verified?'<span class="'.concat("user-bar",'-verified">').concat(this.verified,"</span>"):"","\n            </div>\n        ")}},{key:"bindEvent",value:function(e){}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-img-view{position:fixed;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:100;background:rgba(25,18,25,.9);cursor:-webkit-zoom-out;cursor:zoom-out}");var Le="x-interact-img-view",Pe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.list=t.list,this.containerId=t.containerId?"#"+t.containerId:"",this.container=this.containerId&&document.querySelector(this.containerId)||document.body,this.winHeight=window.innerHeight||document.documentElement.clientHeight,this.winWidth=window.innerWidth||document.documentElement.clientWidth}return a(e,[{key:"render",value:function(){var e=this.makeTpl(this.list);this.container.insertAdjacentHTML("beforeend",e),this.bindEvent()}},{key:"makeTpl",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t[i]||{},o=n||{},a=o.url,c=o.width,r=o.height;c>r?(c=Math.min(c,this.winWidth)-100,e="width: ".concat(c,"px")):(r=Math.min(r,this.winHeight)-100,e="height: ".concat(r,"px"));var s='\n            <div class="'.concat(Le,'">\n                <img src="').concat(a,'" style="').concat(e,'"/>\n            </div>\n        ');return s}},{key:"destory",value:function(){xe(this.container,".".concat(Le),"click");var e=this.container.querySelector(".".concat(Le));e&&(e.outerHTML="")}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(Le),"click",(function(){e.destory()}))}}]),e}(),De="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"",Re={version:"1",imgpath:"https://mbdp03.bdstatic.com/sdks/emoticon/img/",packages:[{id:"1",name:"emoji",package_icon:"package_01.png",emoticons:[{id:"001001",text:"[微笑]",icon:"face_01.png"},{id:"001004",text:"[大笑]",icon:"face_04.png"},{id:"001005",text:"[鼓掌]",icon:"face_05.png"},{id:"001206",text:"[嘻嘻]",icon:"face_206.png"},{id:"001023",text:"[色]",icon:"face_23.png"},{id:"001025",text:"[得意]",icon:"face_25.png"},{id:"001159",text:"[挤眼]",icon:"face_159.png"},{id:"001071",text:"[滑稽]",icon:"face_71.png"},{id:"001197",text:"[困]",icon:"face_197.png"},{id:"001011",text:"[汗]",icon:"face_11.png"},{id:"001073",text:"[左捂脸]",icon:"face_73.png"},{id:"001072",text:"[捂脸]",icon:"face_72.png"},{id:"001007",text:"[笑哭]",icon:"face_07.png"},{id:"001014",text:"[发怒]",icon:"face_14.png"},{id:"001021",text:"[害羞]",icon:"face_21.png"},{id:"001194",text:"[黑线]",icon:"face_194.png"},{id:"001196",text:"[可怜]",icon:"face_196.png"},{id:"001024",text:"[舔屏]",icon:"face_24.png"},{id:"001065",text:"[打call]",icon:"face_65.png"},{id:"001003",text:"[期待]",icon:"face_03.png"},{id:"001098",text:"[亲吻]",icon:"face_98.png"},{id:"001012",text:"[抠鼻]",icon:"face_12.png"},{id:"001219",text:"[ok啊]",icon:"face_219.png"},{id:"001068",text:"[没眼看]",icon:"face_68.png"},{id:"001034",text:"[偷笑]",icon:"face_34.png"},{id:"001013",text:"[哼]",icon:"face_13.png"},{id:"001033",text:"[你懂的]",icon:"face_33.png"},{id:"001215",text:"[欧耶]",icon:"face_215.png"},{id:"001016",text:"[不高兴]",icon:"face_16.png"},{id:"001066",text:"[尬笑]",icon:"face_66.png"},{id:"001239",text:"[泪奔]",icon:"face_239.png"},{id:"001019",text:"[大哭]",icon:"face_19.png"},{id:"001020",text:"[流泪]",icon:"face_20.png"},{id:"001038",text:"[鄙视]",icon:"face_38.png"},{id:"001015",text:"[委屈]",icon:"face_15.png"},{id:"001228",text:"[挠头]",icon:"face_228.png"},{id:"001192",text:"[费解]",icon:"face_192.png"},{id:"001026",text:"[疑问]",icon:"face_26.png"},{id:"001226",text:"[苦思冥想]",icon:"face_226.png"},{id:"001027",text:"[晕]",icon:"face_27.png"},{id:"001051",text:"[爱钱]",icon:"face_51.png"},{id:"001069",text:"[嘿哈]",icon:"face_69.png"},{id:"001029",text:"[二哈]",icon:"face_29.png"},{id:"001028",text:"[大哈]",icon:"face_28.png"},{id:"001030",text:"[三哈]",icon:"face_30.png"},{id:"001217",text:"[惊恐]",icon:"face_217.png"},{id:"001241",text:"[石化]",icon:"face_241.png"},{id:"001041",text:"[衰]",icon:"face_41.png"},{id:"001042",text:"[骷髅]",icon:"face_42.png"},{id:"001018",text:"[惊哭]",icon:"face_18.png"},{id:"001009",text:"[啊]",icon:"face_09.png"},{id:"001166",text:"[生病]",icon:"face_166.png"},{id:"001037",text:"[再见]",icon:"face_37.png"},{id:"001036",text:"[哈欠]",icon:"face_36.png"},{id:"001187",text:"[并不简单]",icon:"face_187.png"},{id:"001218",text:"[社会]",icon:"face_218.png"},{id:"001216",text:"[嫌弃]",icon:"face_216.png"},{id:"001031",text:"[白眼]",icon:"face_31.png"},{id:"001002",text:"[开心]",icon:"face_02.png"},{id:"001067",text:"[坏笑]",icon:"face_67.png"},{id:"001022",text:"[亲亲]",icon:"face_22.png"},{id:"001221",text:"[撇嘴]",icon:"face_221.png"},{id:"001188",text:"[馋嘴]",icon:"face_188.png"},{id:"001203",text:"[思考]",icon:"face_203.png"},{id:"001220",text:"[耶耶耶]",icon:"face_220.png"},{id:"001191",text:"[顶]",icon:"face_191.png"},{id:"001154",text:"[感冒]",icon:"face_154.png"},{id:"001222",text:"[emmm]",icon:"face_222.png"},{id:"001044",text:"[闭嘴]",icon:"face_44.png"},{id:"001231",text:"[摸头]",icon:"face_231.png"},{id:"001209",text:"[右哼哼]",icon:"face_209.png"},{id:"001210",text:"[左哼哼]",icon:"face_210.png"},{id:"001202",text:"[失望]",icon:"face_202.png"},{id:"001017",text:"[囧]",icon:"face_17.png"},{id:"001039",text:"[抓狂]",icon:"face_39.png"},{id:"001040",text:"[咒骂]",icon:"face_40.png"},{id:"001070",text:"[前面的别走]",icon:"face_70.png"},{id:"001050",text:"[友军]",icon:"face_50.png"},{id:"001049",text:"[同上]",icon:"face_49.png"},{id:"001195",text:"[互粉]",icon:"face_195.png"},{id:"001122",text:"[加油啊]",icon:"face_122.png"},{id:"001238",text:"[呕]",icon:"face_238.png"},{id:"001189",text:"[吃瓜]",icon:"face_189.png"},{id:"001227",text:"[奥利给]",icon:"face_227.png"},{id:"001043",text:"[嘘]",icon:"face_43.png"},{id:"001224",text:"[拒绝]",icon:"face_224.png"},{id:"001225",text:"[观望]",icon:"face_225.png"},{id:"001232",text:"[nonono]",icon:"face_232.png"},{id:"001237",text:"[戳脸]",icon:"face_237.png"},{id:"001236",text:"[走你]",icon:"face_236.png"},{id:"001230",text:"[无所谓]",icon:"face_230.png"},{id:"001223",text:"[暗中观察]",icon:"face_223.png"},{id:"001190",text:"[打脸]",icon:"face_190.png"},{id:"001010",text:"[哟]",icon:"face_10.png"},{id:"001233",text:"[握草]",icon:"face_233.png"},{id:"001234",text:"[苦笑]",icon:"face_234.png"},{id:"001032",text:"[阴险]",icon:"face_32.png"},{id:"001045",text:"[呆]",icon:"face_45.png"},{id:"001168",text:"[太开心]",icon:"face_168.png"},{id:"001186",text:"[悲伤]",icon:"face_186.png"},{id:"001148",text:"[爱你]",icon:"face_148.png"},{id:"001006",text:"[悠闲]",icon:"face_06.png"},{id:"001046",text:"[什么鬼]",icon:"face_46.png"},{id:"001235",text:"[饮酒醉]",icon:"face_235.png"},{id:"001047",text:"[吐]",icon:"face_47.png"},{id:"001240",text:"[额]",icon:"face_240.png"},{id:"001229",text:"[凝视]",icon:"face_229.png"},{id:"001008",text:"[不要啊]",icon:"face_08.png"},{id:"001175",text:"[武汉加油]",icon:"face_175.png"},{id:"001048",text:"[已阅]",icon:"face_48.png"},{id:"001162",text:"[男孩儿]",icon:"face_162.png"},{id:"001163",text:"[女孩儿]",icon:"face_163.png"},{id:"001185",text:"[抱抱]",icon:"face_185.png"},{id:"001193",text:"[跪了]",icon:"face_193.png"},{id:"001204",text:"[摊手]",icon:"face_204.png"},{id:"001167",text:"[酸]",icon:"face_167.png"},{id:"001074",text:"[666]",icon:"face_74.png"},{id:"001123",text:"[勤洗手]",icon:"face_123.png"},{id:"001125",text:"[n95口罩]",icon:"face_125.png"},{id:"001207",text:"[心]",icon:"face_207.png"},{id:"001124",text:"[中国]",icon:"face_124.png"},{id:"001062",text:"[蜡烛]",icon:"face_62.png"},{id:"001055",text:"[鲜花]",icon:"face_55.png"},{id:"001156",text:"[给力]",icon:"face_156.png"},{id:"001160",text:"[礼物]",icon:"face_160.png"},{id:"001057",text:"[庆祝]",icon:"face_57.png"},{id:"001176",text:"[喜]",icon:"face_176.png"},{id:"001150",text:"[旅行]",icon:"face_150.png"},{id:"001173",text:"[围脖]",icon:"face_173.png"},{id:"001165",text:"[伤心]",icon:"face_165.png"},{id:"001060",text:"[赞同]",icon:"face_60.png"},{id:"001097",text:"[祈福]",icon:"face_97.png"},{id:"001095",text:"[双手鼓掌]",icon:"face_95.png"},{id:"001211",text:"[作揖]",icon:"face_211.png"},{id:"001200",text:"[拳头]",icon:"face_200.png"},{id:"001212",text:"[haha]",icon:"face_212.png"},{id:"001208",text:"[耶]",icon:"face_208.png"},{id:"001205",text:"[握手]",icon:"face_205.png"},{id:"001214",text:"[ok]",icon:"face_214.png"},{id:"001198",text:"[来]",icon:"face_198.png"},{id:"001201",text:"[弱]",icon:"face_201.png"},{id:"001101",text:"[加油]",icon:"face_101.png"},{id:"001213",text:"[NO]",icon:"face_213.png"},{id:"001184",text:"[good]",icon:"face_184.png"},{id:"001105",text:"[小黄鸭]",icon:"face_105.png"},{id:"001102",text:"[泡泡枪]",icon:"face_102.png"},{id:"001104",text:"[棒棒糖]",icon:"face_104.png"},{id:"001114",text:"[小老鼠]",icon:"face_114.png"},{id:"001199",text:"[喵喵]",icon:"face_199.png"},{id:"001183",text:"[猪头]",icon:"face_183.png",hideInEmojiKeyboard:!0},{id:"001053",text:"[国宝]",icon:"face_53.png"},{id:"001054",text:"[羊驼]",icon:"face_54.png"},{id:"001170",text:"[兔子]",icon:"face_170.png"},{id:"001174",text:"[围观]",icon:"face_174.png"},{id:"001118",text:"[钱袋]",icon:"face_118.png"},{id:"001079",text:"[财神]",icon:"face_79.png"},{id:"001117",text:"[灯笼]",icon:"face_117.png"},{id:"001151",text:"[点亮平安灯]",icon:"face_151.png"},{id:"001115",text:"[2020]",icon:"face_115.png",hideInEmojiKeyboard:!0},{id:"001120",text:"[舞狮]",icon:"face_120.png"},{id:"001078",text:"[鞭炮]",icon:"face_78.png"},{id:"001058",text:"[生日蛋糕]",icon:"face_58.png"},{id:"001149",text:"[奥特曼]",icon:"face_149.png"},{id:"001061",text:"[药丸]",icon:"face_61.png"},{id:"001063",text:"[鸡蛋]",icon:"face_63.png"},{id:"001155",text:"[干杯]",icon:"face_155.png"},{id:"001180",text:"[炸鸡腿]",icon:"face_180.png"},{id:"001152",text:"[肥皂]",icon:"face_152.png"},{id:"001171",text:"[威武]",icon:"face_171.png"},{id:"001157",text:"[给你小心心]",icon:"face_157.png"},{id:"001178",text:"[音乐]",icon:"face_178.png"},{id:"001082",text:"[火车]",icon:"face_82.png"},{id:"001083",text:"[飞机]",icon:"face_83.png"},{id:"001158",text:"[话筒]",icon:"face_158.png"},{id:"001182",text:"[钟]",icon:"face_182.png"},{id:"001181",text:"[照相机]",icon:"face_181.png"},{id:"001161",text:"[绿丝带]",icon:"face_161.png"},{id:"001172",text:"[微风]",icon:"face_172.png"},{id:"001169",text:"[太阳]",icon:"face_169.png"},{id:"001126",text:"[月亮]",icon:"face_126.png"},{id:"001153",text:"[浮云]",icon:"face_153.png"},{id:"001177",text:"[下雨]",icon:"face_177.png"},{id:"001164",text:"[沙尘暴]",icon:"face_164.png"},{id:"001179",text:"[赞啊]",icon:"face_179.png"},{id:"001247",text:"[雪花]",icon:"face_247.png"},{id:"001248",text:"[2021]",icon:"face_248.png"},{id:"001250",text:"[牛年大吉]",icon:"face_250.png"},{id:"001251",text:"[牛福到]",icon:"face_251.png"},{id:"001252",text:"[云红包]",icon:"face_252.png"},{id:"001253",text:"[牛洋洋]",icon:"face_253.png"},{id:"001254",text:"[牛斯拉]",icon:"face_254.png"},{id:"001255",text:"[云喝酒]",icon:"face_255.png"},{id:"001242",text:"[工人]",icon:"face_242.png",hideInEmojiKeyboard:!0},{id:"001243",text:"[农民]",icon:"face_243.png",hideInEmojiKeyboard:!0},{id:"001244",text:"[稻草人]",icon:"face_244.png",hideInEmojiKeyboard:!0},{id:"001245",text:"[锦旗]",icon:"face_245.png",hideInEmojiKeyboard:!0},{id:"001246",text:"[大红花]",icon:"face_246.png",hideInEmojiKeyboard:!0},{id:"001127",text:"[→_→]",icon:"face_127.png",hideInEmojiKeyboard:!0},{id:"001035",text:"[睡觉]",icon:"face_35.png",hideInEmojiKeyboard:!0},{id:"001056",text:"[中国加油]",icon:"face_56.png",hideInEmojiKeyboard:!0},{id:"001059",text:"[MicDrop]",icon:"face_59.png",hideInEmojiKeyboard:!0},{id:"001064",text:"[浪]",icon:"face_64.png",hideInEmojiKeyboard:!0},{id:"001075",text:"[2018]",icon:"face_75.png",hideInEmojiKeyboard:!0},{id:"001076",text:"[福]",icon:"face_76.png",hideInEmojiKeyboard:!0},{id:"001077",text:"[红包]",icon:"face_77.png",hideInEmojiKeyboard:!0},{id:"001080",text:"[饺子]",icon:"face_80.png",hideInEmojiKeyboard:!0},{id:"001081",text:"[车票]",icon:"face_81.png",hideInEmojiKeyboard:!0},{id:"001084",text:"[射门]",icon:"face_84.png",hideInEmojiKeyboard:!0},{id:"001085",text:"[红牌]",icon:"face_85.png",hideInEmojiKeyboard:!0},{id:"001086",text:"[黄牌]",icon:"face_86.png",hideInEmojiKeyboard:!0},{id:"001087",text:"[哨子]",icon:"face_87.png",hideInEmojiKeyboard:!0},{id:"001088",text:"[比分]",icon:"face_88.png",hideInEmojiKeyboard:!0},{id:"001089",text:"[啤酒]",icon:"face_89.png",hideInEmojiKeyboard:!0},{id:"001090",text:"[足球]",icon:"face_90.png",hideInEmojiKeyboard:!0},{id:"001091",text:"[大力神杯]",icon:"face_91.png",hideInEmojiKeyboard:!0},{id:"001092",text:"[锦鲤]",icon:"face_92.png",hideInEmojiKeyboard:!0},{id:"001096",text:"[火焰]",icon:"face_96.png",hideInEmojiKeyboard:!0},{id:"001099",text:"[天使]",icon:"face_99.png",hideInEmojiKeyboard:!0},{id:"001100",text:"[樱花]",icon:"face_100.png",hideInEmojiKeyboard:!0},{id:"001103",text:"[气球]",icon:"face_103.png",hideInEmojiKeyboard:!0},{id:"001106",text:"[粽子]",icon:"face_106.png",hideInEmojiKeyboard:!0},{id:"001107",text:"[70周年]",icon:"face_107.png",hideInEmojiKeyboard:!0},{id:"001108",text:"[国庆]",icon:"face_108.png",hideInEmojiKeyboard:!0},{id:"001109",text:"[国庆快乐]",icon:"face_109.png",hideInEmojiKeyboard:!0},{id:"001110",text:"[圣诞老人]",icon:"face_110.png",hideInEmojiKeyboard:!0},{id:"001111",text:"[圣诞树]",icon:"face_111.png",hideInEmojiKeyboard:!0},{id:"001112",text:"[圣诞袜]",icon:"face_112.png",hideInEmojiKeyboard:!0},{id:"001113",text:"[铃铛]",icon:"face_113.png",hideInEmojiKeyboard:!0},{id:"001119",text:"[鼠年大吉]",icon:"face_119.png",hideInEmojiKeyboard:!0},{id:"001121",text:"[戴口罩]",icon:"face_121.png",hideInEmojiKeyboard:!0},{id:"001128",text:"[⚡]",icon:"face_128.png",hideInEmojiKeyboard:!0},{id:"001129",text:"[🍉]",icon:"face_129.png",hideInEmojiKeyboard:!0},{id:"001130",text:"[🍗]",icon:"face_130.png",hideInEmojiKeyboard:!0},{id:"001131",text:"[🎄]",icon:"face_131.png",hideInEmojiKeyboard:!0},{id:"001132",text:"[👏]",icon:"face_132.png",hideInEmojiKeyboard:!0},{id:"001133",text:"[👻]",icon:"face_133.png",hideInEmojiKeyboard:!0},{id:"001134",text:"[💊]",icon:"face_134.png",hideInEmojiKeyboard:!0},{id:"001135",text:"[💣]",icon:"face_135.png",hideInEmojiKeyboard:!0},{id:"001136",text:"[💩]",icon:"face_136.png",hideInEmojiKeyboard:!0},{id:"001137",text:"[🤓]",icon:"face_137.png",hideInEmojiKeyboard:!0},{id:"001138",text:"[🤗]",icon:"face_138.png",hideInEmojiKeyboard:!0},{id:"001139",text:"[👿]",icon:"face_139.png",hideInEmojiKeyboard:!0},{id:"001140",text:"[😱]",icon:"face_140.png",hideInEmojiKeyboard:!0},{id:"001141",text:"[🙃]",icon:"face_141.png",hideInEmojiKeyboard:!0},{id:"001142",text:"[🙅]",icon:"face_142.png",hideInEmojiKeyboard:!0},{id:"001143",text:"[🙈]",icon:"face_143.png",hideInEmojiKeyboard:!0},{id:"001144",text:"[🙉]",icon:"face_144.png",hideInEmojiKeyboard:!0},{id:"001145",text:"[🙊]",icon:"face_145.png",hideInEmojiKeyboard:!0},{id:"001146",text:"[🙋]",icon:"face_146.png",hideInEmojiKeyboard:!0},{id:"001147",text:"[🙏]",icon:"face_147.png",hideInEmojiKeyboard:!0}]}]},Oe=m(Re.packages,1)[0].emoticons;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;/(iPhone|iPod|iPad)/.test(e)}(),function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-rich-text{padding-top:10px;font:14px/22px PingFangSC-Regular;text-align:justify;color:#222;word-break:break-all;word-wrap:break-word}.x-interact-rich-text>a{text-decoration:none}.x-interact-rich-text .type-at,.x-interact-rich-text .type-image,.x-interact-rich-text .type-link,.x-interact-rich-text .type-topic,.x-interact-rich-text .type-video,.x-interact-rich-text .type-vote{color:#4367b4;cursor:pointer}.x-interact-rich-text .invalid-href.type-at{color:#858585;pointer-events:none}.x-interact-rich-text .type-emoji{width:14px;margin-top:-4px;background-size:100%}.x-interact-rich-text .type-emoji,.x-interact-rich-text .type-label{display:inline-block;height:14px;background-repeat:no-repeat;background-position:50% 50%;vertical-align:middle}.x-interact-rich-text .type-label{width:42px;margin-top:-2px;background-size:cover}.x-interact-rich-text .type-label-1{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-1.png)}.x-interact-rich-text .type-label-2{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-hot-level-2.png)}.x-interact-rich-text-is-author{padding:0 .03rem;font-size:.1rem;color:#4d6df2;background:#e4eaff;border-radius:.03rem}.x-interact-rich-text-colon,.x-interact-rich-text-uname{color:#858585}");var Ae="x-interact-rich-text",ze={1:"at",3:"link",4:"image"},Ne={1:"link",2:"video",3:"vote"},Be=["at","topic","link","video","vote"],Ke=function(e){return"https://author.baidu.com/home?context=%7B%22uk%22%3A%22".concat(e,"%22%7D")},Me=(Re||{}).imgpath||"https://mbdp03.bdstatic.com/sdks/emoticon/img/",He=function(e){d(i,e);var t=u(i);function i(e){return n(this,i),e.customCls="rich-text",t.call(this,e)}return a(i,[{key:"bindEvent",value:function(e){var t=this.root=e.querySelector(".".concat("rich-text",'[data-reply-id="').concat(this.replyId,'"]'));this.root&&ge(t,".type-image","click",(function(e){var t=e.target.dataset;!function(e){new Pe(e).render()}({list:[{width:t.width,height:t.height,url:t.url}]})}))}}]),i}(function(){function e(t){n(this,e),this.content=t.content,this.contentRich=t.contentRich,this.replyToComment=t.replyToComment,this.hotLevel=t.hotLevel,this.replyId=t.replyId,this.getHomePage=t.getHomePage||Ke,this.customCls=t.customCls||"",this.uname=t.uname,this.isAuthor=t.isAuthor,this.richTypeMap=ze,this.showViewImgText=t.showViewImgText||!1}return a(e,[{key:"makeTpl",value:function(e){var t=this.formatRichText();return t.length?'\n            <div class="'.concat(Ae," ").concat(this.customCls,'" data-reply-id="').concat(this.replyId,'">\n                ').concat(this.uname?'<span class="'.concat(Ae,'-uname">').concat(this.uname,"</span>"):"","\n                ").concat(this.isAuthor?'<span class="'.concat(Ae,'-is-author">作者</span>'):"","\n                ").concat(this.uname||this.isAuthor?'<span class="'.concat(Ae,'-colon">:</span>'):"","\n                ").concat(t.map((function(e){return Be.indexOf(e.type)>-1?'\n                            <a\n                                class="'.concat(e.class," ").concat(e.url?"":"invalid-href",'"\n                                href="').concat(e.url,'"\n                                ').concat(e.style?"style=".concat(e.style):"","\n                            >").concat(e.text,"</a>\n                        "):'\n                        <span\n                            class="'.concat(e.class,'"\n                            ').concat(e.style?"style=".concat(e.style):"","\n                            ").concat("image"===e.type?"data-url=".concat(e.url," data-width=").concat(e.width," data-height=").concat(e.height):"","\n                        >").concat(e.text,"</span>\n                    ")})).join(""),"\n                ").concat(e||"","\n            </div>\n        "):""}},{key:"formatRichText",value:function(){var e=this,t=this.sliceByRich(this.content,this.contentRich,!this.showViewImgText);if(this.replyToComment&&this.replyToComment.length){var i=[];this.replyToComment.map((function(t){i=i.concat([{type:"text",text:" // ",class:"type-text"},{type:"at",text:"@".concat(t.user.uname),class:"type-at",uk:t.user.uk,url:e.getHomePage(t.user.uk)},{type:"text",text:"：",class:"type-text"}],e.sliceByRich(t.content,t.content_rich,!1,t.image_list))})),t=t.concat(i)}return+this.hotLevel&&t.unshift({type:"label",text:"",class:"type-label type-label-".concat(this.hotLevel)}),t}},{key:"sliceByRich",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=[],c=0,r=o&&o.large||{};if(t&&t.length){var s=null;t.forEach((function(t){if(4==+t.type)s={type:"image",text:t.attr.text,class:"type-image",url:r.url||t.attr.url,width:r.width,height:r.height};else{c<t.start&&(a=a.concat(i.sliceByEmoji(e.slice(c,+t.start))),c=+t.start);var n=i.richTypeMap[+t.type]||"text";"link"===n&&(n=Ne[+t.attr.icon]||"link");var o=e.slice(+t.start,+t.start+ +t.length);a.push({type:n,text:o,class:"type-".concat(n),uk:t.attr.uk||"",url:("at"===n?i.getHomePage(t.attr.uk):t.attr.link)||""}),c+=+t.length}})),c<e.length&&(a=a.concat(this.sliceByEmoji(e.slice(c)))),!n&&s&&a.push(s)}else a=g(this.sliceByEmoji(e));return a}},{key:"sliceByEmoji",value:function(e){if(!e)return[];var t=/(\[.*?\])/;return e.split(t).filter((function(e){return e.length})).map((function(e){var i="text",n="type-text",o="",a=function(e){for(var t,i="",n=0;n<Oe.length;n++)if((t=Oe[n]).text===e){i=t.icon;break}return i}(e);return t.test(e)&&a&&(i="emoji",n="type-emoji",o="background-image:url(".concat(Me).concat(a,"?t=").concat(Math.floor(Date.now()/1e3/60/60),")"),e=""),{type:i,text:e,style:o,class:n}}))}}]),e}());!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-image{position:relative;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;border:1px solid rgba(0,0,0,.05);border-radius:12px;overflow:hidden}.x-interact-image-placeholder{position:absolute;left:0;top:0;width:100%;height:100%;background:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-bd-logo.png) 50% 50% no-repeat;background-size:50% 50%}.x-interact-image-thumb{position:relative;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;height:auto;cursor:-webkit-zoom-in;cursor:zoom-in}.x-interact-image-thumb .tag{position:absolute;right:14px;bottom:14px;font-size:14px;text-shadow:0 0 5px rgba(0,0,0,.3);color:#fff}.x-interact-image-large{position:relative;display:none;width:100%;height:auto;cursor:-webkit-zoom-out;cursor:zoom-out}");var Ue=["","GIF","长图"],qe=function(e){d(i,e);var t=u(i);function i(e){var o;return n(this,i),(o=t.call(this,l(l({},e),{},{id:e.replyId,wrapperWidth:"176px",prefixCls:"image-scale"}))).isLarge=!1,o}return a(i,[{key:"bindEvent",value:function(e){var t=this,i=e.querySelector('.image-scale[data-id="'.concat(this.id,'"]')),n=i.querySelector(".image-scale-thumb"),o=i.querySelector(".image-scale-large");ge(i,".".concat("image-scale","-thumb"),"click",(function(e){i.style.width="100%",i.style.height="auto",n.style.display="none",o.style.display="block",t.isLarge=!0})),ge(i,".".concat("image-scale","-large"),"click",(function(e){i.style.width="176px",n.style.display="block",o.style.display="none",t.isLarge=!1}))}}]),i}(function(){function e(t){n(this,e),this.container=t.container,this.thumb=t.thumb,this.large=t.large,this.type=t.type||0,this.id=t.id,this.size=t.size||"1:1",this.scale=this.getScale(this.size);var i=t.wrapperWidth;this.wrapperStyle=t.wrapperStyle||(i?"width: ".concat(i):""),this.prefixCls=t.prefixCls||"x-interact-image"}return a(e,[{key:"render",value:function(){if(this.container){var e=this.makeTpl();this.container.insertAdjacentHTML("beforeend",e)}}},{key:"makeTpl",value:function(){var e=this.thumb;if(e){var t=["padding-top: ".concat(100*this.scale,"%"),"background-image: ".concat(e?"url(".concat(e,")"):"")].join(";"),i=this.prefixCls;return'\n            <div class="'.concat("x-interact-image"," ").concat(i,'"\n                ').concat(this.id?'data-id="'.concat(this.id,'"'):"",'\n                style="').concat(this.wrapperStyle,'"\n            >\n                <div class="').concat("x-interact-image","-placeholder ").concat(i,'-placeholder"></div>\n                <div class="').concat("x-interact-image","-thumb ").concat(i,'-thumb" style="').concat(t,'">\n                    ').concat(+this.type?'<span class="tag">'.concat(Ue[+this.type],"<span>"):"","\n                </div>\n                ").concat(this.large?'<img class="'.concat("x-interact-image","-large ").concat(i,'-large" src="').concat(this.large,'"/>'):"","\n            </div>\n        ")}}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1:1",t=1,i=e.split(":")||[],n=+i[0];if(n>0){var o=+i[1]||0;t=o/n}return t}}]),e}());!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-toast{position:fixed;left:50%;bottom:20%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:10px;font-size:18px;color:#fff;background:rgba(0,0,0,.8);border:1px solid hsla(0,0%,100%,.5);border-radius:12px}");var Fe=function(){function e(){n(this,e)}return a(e,null,[{key:"show",value:function(e){var t=this;this.timer&&this.hide(),this.text=e.text,this.duration=e.duration||3e3,this.afterHide=e.afterHide,this.render(),this.timer=setTimeout((function(){t.hide()}),this.duration)}},{key:"hide",value:function(){this.el&&(this.clear(),this.changeStyle("display","none"),C(this.afterHide)&&this.afterHide())}},{key:"render",value:function(){if(this.el)this.el.innerText=this.text,this.changeStyle("display","block");else{var e=document.createElement("div");e.classList.add("x-toast"),e.innerText=this.text,this.el=e,document.body.appendChild(e)}}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"changeStyle",value:function(e,t){this.el.style[e]=t}}]),e}();function Ve(e){return new Promise((function(t,i){ae({url:z.ADDREPLY,data:{appid:R.appid,thread_id:R.threadId,parent_id:e.replyId,content:e.text,sync_text:+e.isRadioChecked,ts:Date.now(),client_type:"pc"},jsonpCallbackName:"callback",success:function(e){var n;!+e.errno&&e.ret?(Fe.show({text:"发表成功"}),t(function(e){var t=e.sync_text_comment;return t&&(e.sync_text_comment=r(t,l(l({},t.user),{},{thread_id:e.thread_id,is_author:!0,like_count:0}))),e}(e.ret))):(Fe.show({text:(n=e.errno,F[n+""]||"发表失败，请稍后重试")}),i())},error:function(e,t){Fe.show({text:H}),i({e:e,p:t})}})}))}var $e=location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion=",We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.__instance;if(!t&&i&&i.show)i.show();else{var n=e.apiOpt,o=void 0===n?{}:n,a=e.successCb;delete e.apiOpt,window.__instance=i=window.passport.pop.init(l({loginVersion:"v4",apiOpt:l({loginType:1,u:window.location.href,product:"interact",staticPage:window.location.origin+"/v3Jump.html"},o),cache:!1,tangram:!0,authsite:["tqq","renren","tsina"],onLoginSuccess:function(e){a&&a(e),e.returnValue=!1,window.__instance.hide()},onSubmitStart:function(e){},onSubmitedErr:function(e){},onSystemErr:function(e){},onShow:function(e){},onRealHide:function(e){},onHide:function(e){},onDestroy:function(e){}},e)),i.show()}},Ye={},Ge=function(){return new Promise((function(e){R.isLogin?e():(Ye.loginSuccessCb=function(t){var i=((t||{}).rsp||{}).data||{};R.isLogin=!0,R.curUserName=i.userName,e()},function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.passport&&window.passport.pop;i?We(e,t):ne($e+(new Date).getTime(),(function(){We(e,t)}),{})}({apiOpt:{staticPage:R.passStaticPage},successCb:function(e){Ye.loginSuccessCb(e)}},!1))}))},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(!y(e,"date"))throw V("d","Date",e);var i=e.getFullYear().toString(),n={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return t=t.replace(/(y+)/gi,(function(e,t){return i.substr(4-Math.min(4,t.length))})),Object.keys(n).forEach((function(e){t=t.replace(new RegExp("("+e+"+)","g"),(function(t,i){return n[e]<10&&i.length>1?"0"+n[e]:n[e]}))})),t};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-dialog-classic{width:224px;height:131px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-dialog-classic-msg{padding-top:30px;font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-classic-oper{padding:21px 20px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-dialog-classic .btn{width:80px;height:32px;font-size:14px;border-radius:16px;border:none;outline:none}.x-dialog-classic-cancel{color:#1f1f1f;background:#f5f5f6}.x-dialog-classic-confirm{color:#fff;background:#4e6ef2}");var Xe="x-dialog-classic",Ze=function(){function e(t){n(this,e),this.container=t.container,this.message=t.message||"确认做此操作吗",this.cancelText=t.cancelText||"取消",this.confirmText=t.confirmText||"确认",this.onCancel=t.onCancel,this.onConfirm=t.onConfirm,this.onClose=t.onClose,this.render(),this.bindEvent()}return a(e,[{key:"render",value:function(){var e='\n            <div class="'.concat(Xe,'">\n                <h3 class="').concat(Xe,'-msg">').concat(this.message,'</h3>\n                <div class="').concat(Xe,'-oper">\n                    <button class="btn ').concat(Xe,'-cancel">').concat(this.cancelText,'</button>\n                    <button class="btn ').concat(Xe,'-confirm">').concat(this.confirmText,"</button>\n                </div>\n            </div>\n        ");this.container.innerHTML=e}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(Xe,"-cancel"),"click",(function(t){C(e.onCancel)&&e.onCancel(t),e.close()})),ge(this.container,".".concat(Xe,"-confirm"),"click",(function(t){C(e.onConfirm)&&e.onConfirm(t),e.close()})),this.onOtherClickBind=this.onOtherClick.bind(this),setTimeout((function(){ge(document,"html","click",e.onOtherClickBind)}),0)}},{key:"close",value:function(){xe(this.container,".".concat(Xe,"-cancel"),"click"),xe(this.container,".".concat(Xe,"-confirm"),"click"),xe(document,"html","click",this.onOtherClickBind),this.container.innerHTML="",C(this.onClose)&&this.onClose()}},{key:"onOtherClick",value:function(e){this.container.innerHTML&&!e.target.closest(".".concat(Xe))&&this.close()}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-dialog-menu{padding:30px 24px;width:368px;background:#fff;border-radius:16px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1);-webkit-box-sizing:border-box;box-sizing:border-box}.x-dialog-menu-title{font-size:18px;line-height:1;text-align:center;color:#222}.x-dialog-menu-list{margin-top:8px;font-size:0}.x-dialog-menu-item{width:176px;height:32px;margin-top:12px;font-size:14px;border-radius:16px;border:none;outline:none;color:#333;background-color:#f5f5f5}.x-dialog-menu-item:nth-child(2n){margin-left:16px}.x-dialog-menu.is-odd .x-dialog-menu-item:last-child{width:368px}.x-dialog-menu-item:hover{color:#fff;background-color:#4e6ef2}");var Qe="x-dialog-menu",et=function(){function e(t){n(this,e),this.title=t.title,this.list=t.list,this.container=t.container,this.clickCallback=t.clickCallback,this.closeCallback=t.closeCallback,this.container}return a(e,[{key:"render",value:function(){var e=this.makeTpl(this.title,this.list);this.container.insertAdjacentHTML("beforeend",e),this.bindEvent()}},{key:"makeTpl",value:function(e,t){var i=(t&&t.length||0)%2==1?"is-odd":"";return'\n            <div class="'.concat(Qe," ").concat(i,'">\n                <h3 class="').concat(Qe,'-title">').concat(e,'</h3>\n                <div class="').concat(Qe,'-list">\n                ').concat(t.map((function(e,t){return'\n                        <button class="'.concat(Qe,'-item" data-id="').concat(t,'">').concat(e.text,"</button>\n                    ")})).join(""),"\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat(Qe),"click",(function(t){t.preventDefault(),t.stopPropagation();var i=t.target;if(i.className==="".concat(Qe,"-item")){e.close();var n=i.dataset.id,o=e.list[n];o&&C(e.clickCallback)&&e.clickCallback({item:o})}})),this.outerClkFunc=this.outerClick.bind(this),setTimeout((function(){ge(document,"html","click",e.outerClkFunc)}),0)}},{key:"close",value:function(){xe(this.container,".".concat(Qe),"click"),xe(document,"html","click",this.outerClkFunc);var e=this.container.querySelector(".".concat(Qe));e&&(e.outerHTML=""),C(this.closeCallback)&&this.closeCallback()}},{key:"outerClick",value:function(e){!e.target.closest(".".concat(Qe))&&this.close()}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".x-interact-emoj-panel{height:100%;overflow-y:auto}.x-interact-emoj-panel-wrapper{-webkit-box-sizing:border-box;box-sizing:border-box;width:443px;height:230px;line-height:0;padding:20px 6px 20px 20px;font-size:0;border-radius:12px;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,.1);box-shadow:0 2px 10px 0 rgba(0,0,0,.1)}.x-interact-emoj-panel::-webkit-scrollbar{width:3px}.x-interact-emoj-panel::-webkit-scrollbar-thumb{border-radius:10px;background-color:#f2f2f2}.x-interact-emoj-panel .img-wrap{display:inline-block;margin:5px;padding:5px}.x-interact-emoj-panel .img-wrap:hover{background-color:rgba(51,136,255,.2)}.x-interact-emoj-panel .emoj-img{width:30px}");var tt="x-interact-emoj-panel",it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.options=l({containerId:tt,clickCallback:function(){}},t),this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container}return a(e,[{key:"render",value:function(){this.container.classList.add("".concat(tt,"-wrapper")),this.container.innerHTML=this.makeTpl(),this.bindEvent(this.options.clickCallback)}},{key:"makeTpl",value:function(){var e=m(Re.packages,1)[0],t=Re.imgpath,i=e.emoticons||[],n=Je(new Date,"yyyyMMddhh");return'\n            <div class="'.concat(tt,'">\n                ').concat(i.map((function(e){var i=e.text,o=e.icon,a=e.id;return e.hideInEmojiKeyboard?"":'\n                        <span class="img-wrap" data-text="'.concat(i,'" data-id="').concat(a,'">\n                            <img class="emoj-img" src="').concat(t).concat(o,"?r=").concat(n,'" title="').concat(i,'"/>\n                        </span>\n                    ')})).join(""),"\n            </div>\n        ")}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display="block"}},{key:"toggle",value:function(){"none"===this.container.style.display?this.show():this.hide()}},{key:"bindEvent",value:function(e){var t=this;ge(this.container,this.containerId,"click",(function(i){i.preventDefault(),i.stopPropagation();var n=i.target;if("#".concat(n.id)===t.containerId)t.hide();else{"emoj-img"===n.className&&(n=n.parentElement);var o=n.dataset,a=o.text,c=o.id;a&&C(e)&&e({text:a,id:c})}})),ge(document,"html","click",(function(e){t.hide()}))}}]),e}(),nt=function(e){var t=new it(e);return t.render(),t},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;i=i||window.innerHeight||document.documentElement.clientHeight;var n=document.documentElement.scrollTop||window.pageYOffset;return!(i+n-e.offsetTop<=t||e.offsetTop+e.clientHeight<n)};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.x-interact-publish{width:100%;font-size:13px;color:#222}.x-interact-publish-cont{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:94px;width:100%;background:#f5f5f6;border-radius:12px}.x-interact-publish .text-area{padding:16px 16px 23px;width:100%;resize:none;background:#f5f5f6;border-radius:12px;border:none;color:#1f1f1f}.x-interact-publish .text-area:empty:before{content:attr(placeholder)}.x-interact-publish .text-area:focus{outline:none}.x-interact-publish-opt{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:30px;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:12px}.x-interact-publish .emoj,.x-interact-publish .img-upload{display:inline-block;height:18px;width:18px;background-size:contain;background-repeat:no-repeat}.x-interact-publish .emoj{margin-left:5px;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn.png)}.x-interact-publish .emoj:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-emoj-btn-active.png)}.x-interact-publish .img-upload{margin-left:30px;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn.png)}.x-interact-publish .img-upload:hover{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-img-btn-active.png)}.x-interact-publish .radio{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.x-interact-publish .radio:not(:first-child){margin-left:30px}.x-interact-publish .radio:before{content:"";display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;height:26px;width:26px;border:2px solid #222;border-radius:100%;-webkit-transform-origin:left;transform-origin:left;-webkit-transform:scale(.5);transform:scale(.5);margin-right:-9px}.x-interact-publish .radio.checked:before{border:none;background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xib-radio-selected.png);background-size:contain;background-repeat:no-repeat;background-color:#4e6ef2}.x-interact-publish .no-radio .radio{display:none}.x-interact-publish .extra{position:absolute;right:90px;color:#9195a3}.x-interact-publish .extra.exceed{color:#f73131}.x-interact-publish .send{position:absolute;top:0;right:0;width:80px;height:30px;line-height:30px;font-size:14px;text-align:center;color:#fff;background:#4e6ef2;border-radius:15px;cursor:pointer}.x-interact-publish .send.disabled{opacity:.2;cursor:not-allowed}.x-interact-publish .emoj-panel{background:#fff}.x-interact-publish .emoj-panel.float-up{position:absolute;z-index:1}');var at="x-interact-publish",ct=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.options=l({containerId:at,placeholder:"发表神评妙论",radio:{label:"同时评论原文",checked:!1},maxTextNum:300,showNumLimit:20,isEmojShow:!0,isEmojFloatUp:!1,isUploadImgShow:!1},t);var i=t.actionCallback,o=t.sendCallback;this.sendCallback=C(o)?o:function(){},this.actionCallback=C(i)?i:function(){},this.containerId="#"+this.options.containerId,this.container=document.querySelector(this.containerId),this.container&&(this.emojPanel="",this.options.emojPanelId=this.options.isEmojShow?this.options.containerId+"_emoj_panel":"",this.imgList=[],this.options.imgListPanelId=this.options.isUploadImgShow?this.options.containerId+"_img_list_panel":"")}return a(e,[{key:"render",value:function(){this.container.innerHTML=this.makeTpl(l({},this.options)),this.setMainDom(),this.bindEvent(),this.checkRealShow()}},{key:"setMainDom",value:function(){this.textarea=this.container.querySelector(".text-area"),this.operatorBar=this.container.querySelector(".".concat(at,"-opt")),this.radio=this.container.querySelector(".radio"),this.radio.checked=!!this.options.radio.checked,this.extra=this.container.querySelector(".extra"),this.send=this.container.querySelector(".send")}},{key:"makeTpl",value:function(e){var t=e.placeholder,i=e.radio,n=void 0===i?{}:i,o=e.emojPanelId,a=e.isEmojFloatUp,c=e.imgListPanelId;return'\n            <div class="'.concat(at,'">\n                <div class="').concat(at,'-cont">\n                    <textarea class="text-area ').concat(t?"placeholder":"",'"\n                        placeholder="').concat(t,'"></textarea>\n                    <div class="other"></div>\n                </div>\n                <div class="').concat(at,'-panel-center">\n                    ').concat(c?'<div id="'.concat(c,'"></div>'):"",'\n                </div>\n                <div class="').concat(at,"-opt ").concat(n.label?"":"no-radio",'">\n                ').concat(o?'\n                    <span class="emoj"></span>\n                ':"","\n                ").concat(c?'\n                    <div class="img-upload"></div>\n                ':"",'\n                    <span class="radio ').concat(n.checked?"checked":"",'">').concat(n.label,'</span>\n                    <span class="extra"></span>\n                    <span class="send disabled">发表</span>\n                </div>\n                <div class="').concat(at,'-panel-bottom">\n                    <div id="').concat(o,'" class="emoj-panel ').concat(a?"float-up":"",'"></div>\n                </div>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var e=this;ge(this.container,this.containerId,"click",(function(t){t.preventDefault(),t.stopPropagation();var i=t.target.className;-1!==i.indexOf("radio")&&(i="radio");var n=e.actionCallback;switch(i){case"emoj":e.emojClk(e.options),n("publish-emoj-click");break;case"radio":e.emojPanelHide(),e.radioClk(),n("publish-radio-click",{checked:e.radio.checked});break;case"send":e.emojPanelHide(),e.sendClk(),n("publish-send-click");break;case"text-area":e.emojPanelHide(),n("publish-textarea-click");break;case"img-upload":e.emojPanelHide(),e.pickImage();break;default:e.emojPanelHide()}})),ge(this.container,".text-area","keyup",(function(){e.setExtra(e.options)}))}},{key:"setTextarea",value:function(e,t){t=t||this.textarea.selectionStart;var i=this.textarea.value;i=i.slice(0,t)+e+i.slice(t),this.textarea.value=i,this.textarea.setSelectionRange(t+e.length,i.length)}},{key:"clearTextarea",value:function(){this.textarea.value="";var e=this.options,t=this.radio;e.radio.label&&t&&t.checked&&(t.classList.remove("checked"),t.checked=!1),this.sendEnable()}},{key:"getTextarea",value:function(){return this.textarea.value}},{key:"setExtra",value:function(e){var t=e.maxTextNum,i=e.showNumLimit,n=t-this.textarea.value.length;n<0?(this.extra.classList.add("exceed"),this.sendEnable(!1)):(this.extra.classList.remove("exceed"),this.sendEnable(!0),n>i&&(n="")),this.extra.innerHTML=n}},{key:"emojClk",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.emojPanel;i?i.toggle():this.emojPanel=nt({containerId:t.emojPanelId,clickCallback:function(i){e.setTextarea(i.text),e.setExtra(t),e.actionCallback("publish-emojItem-click",{id:i.id})}})}},{key:"emojPanelHide",value:function(){var e=this.emojPanel;e&&e.hide()}},{key:"radioClk",value:function(){this.radio.classList.toggle("checked"),this.radio.checked=!this.radio.checked}},{key:"sendClk",value:function(){if(!this.send.classList.contains("disabled")){var e={text:this.getTextarea()};this.options.radio.label&&(e.isRadioChecked=this.radio.checked),this.options.isUploadImgShow&&this.imgList.length&&(e.imgList=this.imgList),C(this.sendCallback)&&this.sendCallback(e)}}},{key:"sendEnable",value:function(e){!0!==e&&!1!==e||(this.globalSendEnable=e);var t=!!this.textarea.value||this.options.isUploadImgShow&&this.imgList.length,i=!1!==this.globalSendEnable&&t?"remove":"add";this.send.classList[i]("disabled")}},{key:"hide",value:function(){this.container.style.display="none",this.getTextarea()&&this.actionCallback("publish-textarea-draft")}},{key:"show",value:function(){this.container.style.display="block"}},{key:"checkRealShow",value:function(e){var t=this.actionCallback;if(ot(this.container)&&t("publish-show"),ot(this.operatorBar)){this.options.emojPanelId&&t("publish-emoj-show");var i=this.options.radio,n=i.label,o=i.checked;n&&t("publish-radio-show",{checked:o}),e&&e()}}},{key:"pickImage",value:function(){}}]),e}(),rt=function(e){var t=new ct(e);return t.render(),t};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".interact-bar{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:8px;font-family:PingFangSC-Regular;font-size:13px;color:#9195a3}.interact-bar:hover .delete,.interact-bar:hover .report{display:block}.interact-bar>*{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-left{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.interact-bar-left .delete,.interact-bar-left .report{display:none;margin-left:10px;cursor:pointer}.interact-bar-right{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#222}.interact-bar-right .like,.interact-bar-right .reply{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.interact-bar-right .icon{background-repeat:no-repeat;background-size:cover;background-position:50%}.interact-bar-right .reply{cursor:pointer}.interact-bar-right .reply-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-reply.png)}.interact-bar-right .like{cursor:pointer;margin-left:16px}.interact-bar-right .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-like.png)}.interact-bar-right .like.liked{color:#f33}.interact-bar-right .like.liked .like-icon{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-liked.png)}.interact-bar-right .icon{width:20px;height:20px;margin-right:3px}.interact-bar .custom-dialog{position:absolute;left:0;top:56px;z-index:1}");var st=W(),lt=function(){function e(t){var i=this;n(this,e),this.createTime=t.createTime,this.isAuthor=t.isAuthor,this.uname=t.uname,this.isUped=!!+t.isUped,this.likeCount=+t.likeCount,this.appid=t.appid,this.threadId=t.threadId,this.replyId=t.replyId,this.onDeleteSuccess=t.onDeleteSuccess,this.onReplySuccess=t.onReplySuccess,this.actionCallback=t.actionCallback,st.on("closeOtherReplyPublish",(function(){i.showReplyPublish&&i.toggleReplyPublish()}))}return a(e,[{key:"makeTpl",value:function(){return'\n            <div class="'.concat("interact-bar",'" data-reply-id="').concat(this.replyId,'">\n                <div class="').concat("interact-bar",'-left">\n                    <span class="time">').concat(function(e){var t="刚刚";if(!e)return t;var i=1e3*e;e=new Date(i);var n=(Date.now()-i)/1e3,o=e.getFullYear();return(new Date).getFullYear()!==o?t=Je(e,"yyyy-MM-dd"):n>86400?t=Je(e,"MM-dd hh:mm"):n>3600?t=parseInt(n/3600,10)+"小时前":n>60&&(t=parseInt(n/60,10)+"分钟前"),t}(this.createTime),"</span>\n                    ").concat(this.isAuthor?'<span class="delete">删除</span>':'<span class="report">举报</span>','\n                </div>\n                <div class="').concat("interact-bar",'-right">\n                    <div class="reply">\n                        <i class="icon reply-icon"></i>\n                        <span class="reply-text">回复</span>\n                    </div>\n                    <div class="like ').concat(+this.isUped?"liked":"",'">\n                        <i class="icon like-icon"></i>\n                        <span class="like-text">').concat(this.likeCount?this.likeCount:"赞","</span>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvent",value:function(e){var t=this,i=this.root=e.querySelector(".".concat("interact-bar",'[data-reply-id="').concat(this.replyId,'"]'));ge(i,".delete","click",(function(e){t.openPanel("classic",t.onClickDelete.bind(t)),t.actionCallback("xcp-delete-click")})),ge(i,".report","click",(function(e){t.openPanel("report",t.onClickReport.bind(t)),t.actionCallback("xcp-report-click")})),ge(i,".reply","click",(function(e){t.toggleReplyPublish(),t.actionCallback("xcp-reply-click")})),ge(i,".like","click",(function(e){t.onClickUpdown(),t.actionCallback("xcp-like-click",{liked:+t.isUped})}))}},{key:"onClickDelete",value:function(){var e=this;this.deleting||(this.deleting=!0,ae({url:z.DELETE,data:{appid:this.appid,thread_id:this.threadId,reply_id:this.replyId,user_type:0,ts:Date.now(),callback:"?"},success:function(t){t&&!+t.errno?(e.root&&C(e.onDeleteSuccess)&&e.onDeleteSuccess(),Fe.show({text:"删除成功"})):Fe.show({text:"删除失败，请稍后重试"}),e.deleting=!1},error:function(t,i){Fe.show({text:H}),e.deleting=!1}}))}},{key:"onClickReport",value:function(e){var t=this;this.reporting||Ge().then((function(){t.reporting=!0,t.actionCallback("xpc-login-succ",{userName:R.curUserName,location:"report"}),ae({url:z.REPORT,data:{appid:t.appid,thread_id:t.threadId,reply_id:t.replyId,reason:e.item&&e.item.id,ts:Date.now(),callback:"?"},success:function(e){e&&!+e.errno?Fe.show({text:"感谢你的举报"}):Fe.show({text:H}),t.reporting=!1},error:function(e,i){Fe.show({text:H}),t.reporting=!1}})}))}},{key:"onClickUpdown",value:function(){var e=this;this.updowning||Ge().then((function(){e.updowning=!0,e.actionCallback("xpc-login-succ",{userName:R.curUserName,location:"like"}),ae({url:z.UPDOWN,data:r({appid:e.appid,thread_id:e.threadId,reply_id:e.replyId,ts:Date.now(),callback:"?"},e.isUped?{undo_type:1}:{type:1}),success:function(t){var i=t&&t.errno;0==+i?e.changeUpdownStatus(!e.isUped):701==+i?Fe.show({text:"点击太频繁了，休息一下吧"}):Fe.show({text:H}),e.updowning=!1},error:function(t,i){Fe.show({text:H}),e.updowning=!1}})}))}},{key:"changeUpdownStatus",value:function(e){if(this.root){this.isUped=e;var t=this.root.querySelector(".like"),i=t.querySelector(".like-text");e?(t.classList.add("liked"),i.innerText=++this.likeCount):(t.classList.remove("liked"),i.innerText=--this.likeCount,this.likeCount<=0&&(this.likeCount=0,i.innerText="赞"))}}},{key:"openPanel",value:function(e,t){var i=document.createElement("div");i.classList.add("custom-dialog"),this.root.insertAdjacentElement("beforeend",i),"classic"===e?new Ze({container:i,message:"确认要删除该评论吗",onConfirm:function(){C(t)&&t()},onClose:function(){return i.parentElement.removeChild(i)}}):"report"===e?function(e){new et(e).render()}({container:i,title:"选择举报原因",list:U,clickCallback:function(e){C(t)&&t(e)},closeCallback:function(){return i.parentElement.removeChild(i)}}):C(t)&&t()}},{key:"toggleReplyPublish",value:function(){var e=this,t="reply-".concat(this.replyId),i=this.root.querySelector(".reply-text"),n=function(){e.showReplyPublish=!1;var n=document.getElementById(t);n.parentElement.removeChild(n),i.innerText="回复"};if(this.showReplyPublish)n();else{st.emit("closeOtherReplyPublish"),this.showReplyPublish=!0,i.innerText="取消回复";var o=document.createElement("div");o.id=t,o.style.paddingTop="17px",this.root.insertAdjacentElement("afterEnd",o),rt({containerId:t,radio:{label:"同时评论原文",checked:!1},placeholder:"回复".concat(this.uname,":"),sendCallback:function(t){t.text&&Ge().then((function(){e.actionCallback("xpc-login-succ",{userName:R.curUserName,location:"reply"}),Ve(l({replyId:e.replyId},t)).then((function(t){n(),C(e.onReplySuccess)&&e.onReplySuccess(t)})).catch((function(){}))}))},actionCallback:this.actionCallback})}}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:28px;font-size:14px;color:#222}.xcp-item .left{width:64px}.is-second .xcp-item .left{width:55px}.xcp-item .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:1%}.is-second .xcp-item{padding-top:28px}");var dt=function(){function e(t){n(this,e),this.container=t.container,this.appid=t.appid,this.data=t.data||{},this.isSecond=t.isSecond||!1,this.onDeleteSuccess=t.onDeleteSuccess,this.unshiftReply=t.unshiftReply,this.syncTextComment=t.syncTextComment,this.actionCallback=t.actionCallback,this.render(),this.bindEvent()}return a(e,[{key:"render",value:function(){var e=this,t=this.data,i=document.createElement("div");i.classList.add("xcp-item"),i.dataset.replyId=t.reply_id;var n=document.createElement("div"),o=document.createElement("div");if(n.classList.add("left"),o.classList.add("right"),this.avatar=new Ie({container:n,src:t.avatar,vip:t.vtype,isSmall:this.isSecond,url:q(t.uk),actionCallback:this.actionCallback}),this.userBar=new Te({uname:t.uname,isAuthor:t.author_comment,verified:t.verified,decorations:t.decorations}),this.richText=new He({content:t.content,contentRich:t.content_rich,replyToComment:t.reply_to_comment,hotLevel:t.hot_level,replyId:t.reply_id}),this.interactBar=new lt({createTime:t.create_time,isAuthor:t.is_author,uname:t.uname,isUped:t.is_uped,likeCount:t.like_count,appid:this.appid,threadId:t.thread_id,replyId:t.reply_id,onDeleteSuccess:function(){return e.onDeleteSuccess({target:e.container,replyCount:+t.reply_count})},onReplySuccess:function(t){return e.onReplySuccess(t)},actionCallback:this.actionCallback}),t.image_list){var a=t.image_list;this.imageScale=new qe({thumb:a.thumb&&a.thumb.url,large:a.large&&a.large.url,type:a.type,replyId:t.reply_id})}var c="\n            ".concat(this.userBar.makeTpl(),"\n            ").concat(this.richText.makeTpl(),"\n            ").concat(this.imageScale&&this.imageScale.makeTpl()||"","\n            ").concat(this.interactBar.makeTpl(),"\n        ");if(o.innerHTML=c,t.reply_list&&t.reply_list.length){var r=document.createElement("div");this.children=new ht({container:r,appid:this.appid,threadId:t.thread_id,isSecond:!0,listData:t.reply_list,parentId:t.reply_id,replyCount:t.reply_count,onUpdateReplyCount:function(t){return e.onUpdateReplyCount(t)},actionCallback:this.actionCallback}),o.appendChild(r)}i.insertAdjacentElement("afterbegin",n),i.insertAdjacentElement("beforeend",o),this.container.appendChild(i)}},{key:"bindEvent",value:function(){var e=this,t=this.container;this.richText.bindEvent(t),this.imageScale&&this.imageScale.bindEvent(t),this.interactBar.bindEvent(t),ge(t,".".concat("xcp-item"),"click",(function(t){var i=t.target;(i.closest(".".concat(e.avatar.prefixCls))||i.closest(".".concat(e.userBar.prefixCls)))&&(t.preventDefault(),t.stopPropagation(),e.actionCallback("xcp-user-click"),window.open(q(e.data.uk)))}))}},{key:"onReplySuccess",value:function(e){var t=this;if(e.sync_text_comment&&C(this.syncTextComment)&&this.syncTextComment(e.sync_text_comment),this.isSecond)C(this.unshiftReply)&&this.unshiftReply(e);else if(this.children)this.children.unshiftItem(e);else{this.data.reply_count=1,this.data.reply_list=[e];var i=document.createElement("div");this.children=new ht({container:i,appid:this.appid,threadId:e.thread_id,isSecond:!0,listData:this.data.reply_list,parentId:this.data.reply_id,replyCount:this.data.reply_count,onUpdateReplyCount:function(e){return t.onUpdateReplyCount(e)},actionCallback:this.actionCallback}),this.container.querySelector(".right").insertAdjacentElement("beforeEnd",i),this.children.changeCommentCount({type:"++"})}}},{key:"onUpdateReplyCount",value:function(e){this.data.reply_count=e}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-list *{-webkit-box-sizing:content-box;box-sizing:content-box}.xcp-list-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-list-loader{margin-top:64px;height:42px;font:14px PingFangSC-Regular;text-align:center;line-height:42px;color:#626675;background:#f5f5f6;border-radius:6px;cursor:pointer}.xcp-list-loader.no-more{background:transparent}.xcp-list-loader.is-second{margin-top:30px;padding-left:55px;height:auto;text-align:left;font:13px/1 PingFangSC-Semibold;font-size:13px;color:#222;background:transparent}.xcp-list-loader.is-second .icon{display:inline-block;width:17px;height:13px;background-repeat:no-repeat;background-size:cover;vertical-align:middle}.xcp-list-loader.is-second .icon-up{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-up.png)}.xcp-list-loader.is-second .icon-down{background-image:url(https://b.bdstatic.com/searchbox/icms/searchbox/img/xcp-arrow-down.png)}");var pt=W(),ht=function(){function e(t){var i=this;n(this,e),this.container=t.container,this.appid=t.appid,this.threadId=t.threadId||"",this.source=t.source||"",this.isSecond=t.isSecond||!1,this.listData=t.listData||[],this.parentId=t.parentId||"0",this.replyCount=+t.replyCount||0,this.onUpdateReplyCount=t.onUpdateReplyCount,this.onUpdateData=t.onUpdateData,this.actionCallback=C(t.actionCallback)?t.actionCallback:function(){},this.queryConf=r({},O,{thread_id:this.threadId,appid:this.appid,use_uk:1}),this.isSecond&&(delete this.queryConf.inner_order,this.queryConf=r(this.queryConf,{num:10,use_list:0,reply_id:this.parentId,order:"9"})),this.loaderStatus={isClosed:!0},this.isSecond&&this.listData.length?(this.render(),this.loaderStatus.hasMore=this.replyCount>2,this.savedOutReplyId=this.listData.map((function(e){return e.reply_id}))):this.fetchData(),this.bindEvent(),this.isSecond||(pt.on("syncTextComment",(function(e){return i.syncTextComment(e)})),pt.on("changeCommentCount",(function(e){return i.changeCommentCount(e)})))}return a(e,[{key:"fetchData",value:function(){var e=this;this.changeLoaderStatus({isLoading:!0}),ae({url:this.isSecond?z.LIST2:z.LIST1,data:r(this.queryConf,{ts:Date.now()}),success:function(t){if(t&&!+t.errno&&t.ret){var i=t.ret||{};e.isSecond&&e.loaderStatus.isClosed&&(e.changeLoaderStatus({isClosed:!1}),i.list=i.list.filter((function(t){return-1===e.savedOutReplyId.indexOf(t.reply_id)}))),e.updateData(i),(i.list||[]).length&&e.render()}else e.changeLoaderStatus({isLoading:!1,isError:!0})},error:function(t,i){e.changeLoaderStatus({isLoading:!1,isError:!0})}})}},{key:"updateData",value:function(e){this.allData=e,this.listData=e.list||[],this.isSecond||(R.commentCount=+e.comment_count,R.isLogin=!!+e.is_login,R.userInfo=r(R.userInfo,e.userinfo),C(this.onUpdateData)&&this.onUpdateData(R.userInfo))}},{key:"render",value:function(){var e=this,t=this.root||document.createElement("div");t.classList.add("xcp-list");var i=this.list||document.createElement("div");i.classList.add("".concat("xcp-list","-list")),this.isSecond?i.classList.add("is-second"):t.insertAdjacentHTML("afterbegin",this.changeTitle()),this.listData.map((function(t){var n=document.createElement("div");new dt({container:n,appid:e.appid,data:t,isSecond:e.isSecond,onDeleteSuccess:function(t){return e.deleteItem(t)},unshiftReply:function(t){return e.unshiftItem(t)},syncTextComment:function(t){return e.syncTextComment(t)},actionCallback:e.actionCallback}),i.appendChild(n)})),!this.list&&t.appendChild(i),t.insertAdjacentHTML("beforeend",this.changeLoaderStatus({isLoading:!1,isError:!1,hasMore:this.allData&&!+this.allData.is_over})),!this.root&&this.container.insertAdjacentElement("beforeend",t),this.root=t,this.list=i}},{key:"makeTplTitle",value:function(e){var t=this.allData&&this.allData.comment_count,i=e||t,n="评论列表";return i&&(this.allData&&(this.allData.comment_count=i),n+="（".concat(i,"条）"),this.actionCallback("xcp-cmtcount-change",{count:i})),'<h2 class="'.concat("xcp-list",'-title">').concat(n,"</h2>")}},{key:"changeTitle",value:function(e){var t=this.container.querySelector(".".concat("xcp-list","-title"));return t?(t.outerHTML=this.makeTplTitle(e),""):this.makeTplTitle(e)}},{key:"makeTplLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.loaderStatus=r(this.loaderStatus,e),i="",n="",o="";return this.isSecond?(n+="is-second",t.isClosed&&this.replyCount<=2?i="":t.isClosed&&this.replyCount>2?(i="全部".concat(this.replyCount,"条回复"),o+="icon-down"):t.hasMore?(i="查看全部回复",o+="icon-down"):(i="收起",o+="icon-up")):t.isLoading?i=N:t.isError?i=B:t.hasMore?i=K:(i=M,n+="no-more"),i?'\n            <div\n                class="'.concat("xcp-list","-loader ").concat(n,'"\n                data-parent-id="').concat(this.parentId,'"\n            >\n                <span>').concat(i,"</span>\n                ").concat(this.isSecond?'<i class="icon '.concat(o,'"></i>'):"","\n            </div>\n        "):""}},{key:"changeLoaderStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.container.querySelector(".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'));return t?(t.outerHTML=this.makeTplLoader(e),""):this.makeTplLoader(e)}},{key:"closeList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.container.querySelector(".".concat("xcp-list","-list"));t.children.length>e;)t.removeChild(t.lastElementChild);this.queryConf.start=0,this.changeLoaderStatus({isClosed:!0,hasMore:!0})}},{key:"bindEvent",value:function(){var e=this;ge(this.container,".".concat("xcp-list",'-loader[data-parent-id="').concat(this.parentId,'"]'),"click",(function(t){!e.isSecond||e.loaderStatus.hasMore?!e.loaderStatus.isLoading&&e.loaderStatus.hasMore&&(e.loaderStatus.isError||(e.queryConf.start+=e.isSecond&&e.loaderStatus.isClosed?0:e.queryConf.num),e.actionCallback("xcp-loader-click",{isSecond:e.isSecond}),e.fetchData()):e.closeList()}))}},{key:"changeCommentCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isSecond)pt.emit("changeCommentCount",e);else{var t=this.allData.comment_count;t="number"==typeof e.count?e.count:"--"===e.type?--this.allData.comment_count:++this.allData.comment_count,R.commentCount=t,this.changeTitle(t)}}},{key:"afterDeleteItem",value:function(e){this.changeCommentCount(this.isSecond?{type:"--"}:{count:+this.allData.comment_count-1-e}),this.isSecond&&(this.replyCount--,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"deleteItem",value:function(e){this.list&&(this.list.removeChild(e.target),this.afterDeleteItem(e.replyCount),this.isSecond||this.list.children.length||!this.root||(this.root.outerHTML="",this.root=null,this.list=null))}},{key:"afterUnshiftItem",value:function(){this.changeCommentCount({type:"++"}),this.isSecond&&(this.replyCount++,this.onUpdateReplyCount(this.replyCount),this.changeLoaderStatus())}},{key:"unshiftItem",value:function(e){var t=this;if(!this.isSecond&&!this.list)return this.listData=[e],this.changeCommentCount({type:"++"}),void this.render();var i=document.createElement("div");new dt({container:i,appid:this.appid,data:e,isSecond:this.isSecond,onDeleteSuccess:function(e){return t.deleteItem(e)},actionCallback:this.actionCallback}),this.list.insertAdjacentElement("afterBegin",i),this.afterUnshiftItem()}},{key:"syncTextComment",value:function(e){this.isSecond?pt.emit("syncTextComment",e):this.unshiftItem(e)}}]),e}();!function(e,t){void 0===t&&(t={});var i=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.dataset.for="xbox-comment-pc","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".xcp-publish{padding-bottom:20px}.xcp-publish-title{font-family:PingFangSC-Semibold;font-size:18px;line-height:1;color:#000}.xcp-publish-main{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-top:20px}.xcp-publish-main .left{padding-top:23px;width:64px}.xcp-publish-main .right{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}");var ut="xcp-publish",ft=function(){function e(t){n(this,e),this.container=t.container,this.avatarSrc=R.userInfo&&R.userInfo.avatar,this.onPublishSuccess=t.onPublishSuccess,this.actionCallback=C(t.actionCallback)?t.actionCallback:function(){},this.render()}return a(e,[{key:"render",value:function(){var e=this,t=document.createElement("div");t.classList.add(ut);var i=document.createElement("div");i.classList.add("".concat(ut,"-main"));var n=document.createElement("div");n.classList.add("left"),this.avatar=new Ie({container:n,src:this.avatarSrc});var o=document.createElement("div"),a="".concat(ut,"-main-right_").concat(Date.now());o.id=a,o.classList.add("right"),i.insertAdjacentElement("beforeEnd",n),i.insertAdjacentElement("beforeEnd",o),t.insertAdjacentHTML("afterBegin",'<h2 class="'.concat(ut,'-title">发表评论</h2>')),t.insertAdjacentElement("beforeEnd",i),this.container.insertAdjacentElement("afterBegin",t),this.publish=rt({containerId:a,radio:{label:""},sendCallback:function(t){delete t.isRadioChecked,t&&t.text&&Ge().then((function(){e.actionCallback("xpc-login-succ",{userName:R.curUserName,location:"publish"}),Ve(t).then((function(t){C(e.onPublishSuccess)&&e.onPublishSuccess(t),e.publish.clearTextarea()})).catch((function(){}))})).catch((function(){}))},actionCallback:this.actionCallback})}},{key:"updateData",value:function(e){this.avatarSrc=e.avatar,this.avatar.updateSrc({src:this.avatarSrc})}},{key:"checkRealShow",value:function(e){this.publish.checkRealShow(e)}}]),e}(),mt=decodeURIComponent,gt=new RegExp("%[a-f0-9]{2}","gi"),xt=new RegExp("(%[a-f0-9]{2})+","gi");function bt(e,t){try{return mt(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var i=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],bt(i),bt(n))}function vt(e){try{return mt(e)}catch(o){for(var t=e.match(gt),i=1;i<t.length;i++)t=(e=bt(t,i).join("")).match(gt);return e}}var yt=function(e){if("string"!=typeof e)throw V("encodedURI","string",e);try{return e=e.replace(/\+/g," "),mt(e)}catch(i){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},i=xt.exec(e);i;){try{t[i[0]]=mt(i[0])}catch(e){var n=vt(i[0]);n!==i[0]&&(t[i[0]]=n)}i=xt.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}},kt=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.split("?"),n=i[1]?i[1]:i[0],o=n.split("&"),a={};return o.forEach((function(e){if((e=e.split("="))[0].length>0){var i="";try{i=(t?yt(e[1]):decodeURIComponent(e[1]))||""}catch(e){}a[e[0]]=i}})),a},wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.split("?"),n=m(i,2),o=n[0],a=n[1],c=void 0===a?"":a;return{url:o,query:t?kt(c):c}};function _t(e,t){for(var i in t)_(t[i])||S(t[i])?(_(t[i])&&!_(e[i])&&(e[i]={}),S(t[i])&&!S(e[i])&&(e[i]=[]),_t(e[i],t[i])):w(t[i])||(e[i]=t[i])}function Ct(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return j(e)&&(e=i.shift()),i.forEach((function(t){_t(e,t)})),e}var Et=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var o=wt(t);if(0===(t=o.url).indexOf("//")){var a=location.protocol;"http:"!==a&&(a="https:"),t=a+t}this.url=t;var c=i.globalData||{};this._default=r(o.query||{},c),this._data={},this._before=i.before}return a(e,[{key:"setGlobalData",value:function(e){return _(e)&&Ct(this._default,e),this}},{key:"mark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!_(e))throw V("data","object",e);return _(e)&&r(this._mdata,e),this}},{key:"_send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!_(e))throw V("data","object",e);var i=new Image(1,1),n="_xbox_mt_".concat(G());window[n]=i,i.onload=i.onerror=i.onabort=function(){i.onload=i.onerror=i.onabort=null,window[n]=i=null},e=Ct({},this._default,e);var o=this._before;if(!t&&C(o)){var a=o(e);if(!1===a)return this;w(a)||(_(a)||E(a))&&(e=a)}var c="".concat(this.url,"?").concat(E(e)?e:ee(e,!0));return i.src=c+"&_rnd="+G(),this}},{key:"send",value:function(e){return this._send(this._data,e),delete this._mdata,this._mdata={},this}},{key:"report",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!_(e))throw V("data","object",e);return this._send(e,t)}}]),e}(),St="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"",jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;"main"===e&&(e="");var i=/ (baiduboxapp|biduboxapp)\//i;if(!1===i.test(t))return!1;var n=t.match(i),o=n[1];return!!~t.indexOf("".concat(e," ").concat(o))},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;"main"===e&&(e="");var i=/\bbdapp\/\d+\.\d+\s+\((\w+);\s*(\w+)\)/;if(""===e){var n=/\s(lite|pro|info|mission)\sbaiduboxapp\//.exec(t);if(n)return!0;if(/\bbdapp\/\d+\.\d+\s/.test(t))return!0}else if(!1===e){var o=t.match(i);if(o&&o[1])return!0}else{if(new RegExp(new RegExp("\\s".concat(e,"\\sbaiduboxapp/"))).test(t))return!0;var a=t.match(i);if(a&&a[1]&&a[1]===e)return!0}return!1},Tt="object"===("undefined"==typeof window?"undefined":i(window))&&window.self===window?navigator.userAgent:"";function Lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt;"main"===e&&(e="");var n,o="0";return"object"===("undefined"==typeof window?"undefined":i(window))&&window.baiduboxapp_version?baiduboxapp_version:((jt(e,t)||It(e,t))&&((n=/(baiduboxapp|baiduboxvision)\/([\d.]+)/.exec(t))?o=n[2]:(n=/([\d+.]+)_(?:diordna|enohpi)_/.exec(t))&&(o=(n=n[1].split(".")).reverse().join("."))),o)}function Pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt;if((e=e||Lt(t,i))&&"string"==typeof e){var n=/\d+\.\d+/.exec(e);if(n)return n[0]}return 0}var Dt=kt(location.search),Rt=navigator.userAgent,Ot=function(e){d(i,e);var t=u(i);function i(e){n(this,i);var o={};return Dt.uid&&Dt.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach((function(e){Dt[e]&&(o[e]=Dt[e])})),t.call(this,e?"https://mbd.baidu.com/ztbox":"https://mbd.baidu.com/tcbox",{globalData:l(l({},o),{},{service:"bdbox",action:e||"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:jt("lite")?10001:jt("info")?10002:It("tomas")?12117:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{boxV:Pt(),ref:Dt.ref||"",gmv:Dt.vmgdb||"",source:Dt.from||Dt.ref||"",boxVersion:Lt(),boxPlatform:Rt.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}})})}return a(i,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),n=t[0],o=t[1],a=_(o)?o:{};return a.data={},a.data.cateid=n,f(p(i.prototype),"setGlobalData",this).call(this,a)}},{key:"pv",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),n=t[0],o=t[1],a={actionid:"1",actiondata:{url:n||location.href}};return o&&(a.actiondata.u=o),f(p(i.prototype),"report",this).call(this,{data:a})}},{key:"event",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,4),n=t[0],o=t[1],a=void 0===o?"":o,c=t[2],r=void 0===c?"":c,s=t[3];if(!n)throw"monitor.tc.event need a evtName";var l={};if(_(a)&&!r)for(var d in l={evtName:n},a)l[d]=a[d];else l={evtName:n,evtType:a,evtTag:r};var h={actionid:"2",actiondata:l};return s&&(h.cateid=s),f(p(i.prototype),"report",this).call(this,{data:h})}},{key:"newEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=m(e,2),n=t[0],o=t[1],a={actionid:"2",actiondata:n};return o&&(a.cateid=o),f(p(i.prototype),"report",this).call(this,{data:a})}}]),i}(Et),At=new Ot,zt="visible"===(document.visibilityState||document.webkitVisibilityState),Nt=function(e){zt?requestAnimationFrame(e):setTimeout(e,15)},Bt=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return At[e].apply(At,i)},Kt=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=this&&this!==window?this:At;if("complete"!==document.readyState){var a=function t(){Nt((function(){o[e].apply(o,i)})),window.removeEventListener("load",t)};window.addEventListener("load",a)}else Nt((function(){o[e].apply(o,i)}))};function Mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St;return/(Android);?[\s/]+([\d.]+)?/.test(e)}function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St;return/(iPhone|iPod|iPad)/.test(e)}var Ut=Lt()||"",qt=Ut.split(".").slice(0,2).join(".")||"",Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St;return Ht(e)?"ios":Mt(e)?"android":"unknown"}()||"",Vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.id,o=e.flow,a=void 0===o?"":o,c=e.action;delete e.action,delete e.id,delete e.flow;var s=t.from,l=void 0===s?"":s,d=t.page,p=void 0===d?"":d,h=t.source,u=void 0===h?"":h,f=t.ext,m=void 0===f?{}:f,g=t.logId,x=void 0===g?"11414":g;m=e.ext?r({},m,e.ext):m,delete e.ext;var b={id:n||x,type:0,content:r({boxVersion:Ut,boxV:qt,platform:Ft,from:l,type:"",page:p,source:u,value:"",ext:m},e)};a&&(b.flow=a),"zpblog"===c?Kt.call(new Ot("zpblog"),"newEvent",[b,99]):i?Kt("newEvent",[b,99]):Bt("newEvent",[b,99])},$t={},Wt=1,Yt=Date.now(),Gt=!1,Jt=function(e){var t=e||{},i=t.source,n=t.nid,o=t.tid,a=t.isLogin;$t={from:"comment",page:"comment_module",source:i,value:+a,ext:{nid:""+n,topicid:""+o,num:R.commentCount}}},Xt=function(e,t){ot(t,340,R.winHeight)&&("hide"===e?Vt(l(l({},$t),{},{type:"comment_duration",ext:{time:String(Date.now()-Yt)},value:R.isLogin})):("show"===e&&(Wt++,Yt=Date.now(),Gt=!1),!Gt&&Vt(l(l({},$t),{},{type:"comment_show",ext:{count:Wt},value:R.isLogin?+R.isLogin:$t.value})),Gt=!0))},Zt=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};switch(e){case"publish-emoj-show":t="emoji_button_show";break;case"publish-radio-show":t=i.checked?"forward_show_1":"forward_show_0";break;case"publish-emoj-click":t="emoji_button_clk";break;case"publish-radio-click":t=i.checked?"forward_success":"forward_cancel";break;case"publish-send-click":t="publish_button";break;case"publish-textarea-click":t="input_box_clk";break;case"publish-emojItem-click":t="emoji_id_clk",n={id:i.id};break;case"publish-textarea-draft":t="publish_comment_draft";break;case"xcp-user-click":t="user_name_clk";break;case"xcp-like-click":t=i.liked?"praise_clk":"praise_cancel_clk ";break;case"xcp-delete-click":t="delete_clk";break;case"xcp-reply-click":t="reply_clk";break;case"xcp-report-click":t="report_clk";break;case"xcp-loader-click":t=i.isSecond?"view_replyall_clk":"view_all_clk"}t&&Vt(l(l({},$t),{},{type:t,ext:n,value:R.isLogin?+R.isLogin:$t.value}))};!function(e){var t=window.Element.prototype;"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=0;t[i]&&t[i]!==this;)++i;return Boolean(t[i])}),"function"!=typeof t.closest&&(t.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}();var Qt=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.options=l({source:"xbox-comment-pc",isNeedPublish:!0,openBrowserLimit:!0},i),this.container=document.getElementById(this.options.containerId);var o=this.options.tid;if(this.options.openBrowserLimit&&!R.isHigherBrowser||!o)this.container&&(this.container.style.display="none");else{var a=this.options,c=a.appid,r=a.source,s=a.isNeedPublish,d=a.staticPage,p=a.actionCallback;this.appid=R.appid=c||"22862035",this.threadId=R.threadId=o,this.source=r,this.isNeedPublish=s,this.actionCallback=C(p)?p:function(){},R.passStaticPage=d,Jt(this.options),this.render(),setTimeout((function(){Xt("first",t.container)}),100),this.bindEvent()}}return a(e,[{key:"render",value:function(){var e=this;if(this.isNeedPublish){var t=document.createElement("div");this.container.appendChild(t),this.publish=new ft({container:t,onPublishSuccess:function(t){e.list.unshiftItem(t)},actionCallback:function(t,i){Zt(t,i),e.actionCallback(t,i)}})}var i=document.createElement("div");this.list=new ht({container:i,appid:this.appid,threadId:this.threadId,source:this.source,onUpdateData:function(t){e.publish&&e.publish.updateData(t)},actionCallback:function(t,i){Zt(t,i),e.actionCallback(t,i)}}),this.container.appendChild(i)}},{key:"bindEvent",value:function(){var e=this,t=!1;C(this.publish.checkRealShow)&&this.publish.checkRealShow,window.addEventListener("scroll",(function(){Xt("scroll",e.container),t||C(e.publish.checkRealShow)&&e.publish.checkRealShow((function(){t=!0}))}),!1),function(e){var t=e.showCb,i=e.hiddenCb;t=t||e.show,i=i||e.hidden||e.hide;var n="",o="";void 0!==document.visibilityState?(n="visibilityState",o="visibilitychange"):void 0!==document.webkitVisibilityState&&(n="webkitVisibilityState",o="webkitvisibilitychange"),o&&document.addEventListener(o,(function(){"visible"===document[n]?t&&t():i&&i()}),!1)}({showCb:function(){Xt("show",e.container),t=!1,C(e.publish.checkRealShow)&&e.publish.checkRealShow()},hiddenCb:function(){Xt("hide",e.container)}})}}]),e}();t.CommentPc=Qt,t.default=function(e){return new Qt(e)},Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,i("6109"))}}]);
//# sourceMappingURL=1.a3a7aea1.js.map